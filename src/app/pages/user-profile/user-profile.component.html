<div class="flex flex-col min-h-screen w-screen h-screen bg-surface-ground p-0 m-0">
  <div *ngIf="loading" class="flex justify-center items-center flex-1 min-h-[200px]">
    <p-progressSpinner styleClass="w-8 h-8" strokeWidth="4"></p-progressSpinner>
  </div>
  <div *ngIf="error && !loading" class="flex justify-center items-center flex-1 min-h-[200px]">
    <p class="text-red-600 text-center">{{ error }}</p>
  </div>

  <div
    *ngIf="userInfo && !loading"
    class="flex flex-1 flex-col w-full h-full bg-gradient-to-br from-primary-500 to-primary-900 text-white m-0 p-0"
  >
    <app-user-profile-header
      [userInfo]="userInfo"
      [loading]="loading"
      [isOwnProfile]="isOwnProfile"
    ></app-user-profile-header>

    <div class="flex flex-col gap-4 w-full h-full p-6">
      <div *ngIf="isOwnProfile && !editMode" class="flex justify-end mb-2">
        <button
          pButton
          type="button"
          icon="pi pi-pencil"
          label="Editar perfil"
          class="p-button-sm p-button-outlined p-button-info"
          (click)="enableEdit()"
        ></button>
      </div>

      <app-user-profile-form
        *ngIf="isOwnProfile && editMode"
        [userInfo]="userInfo"
        [saveLoading]="saveLoading"
        [saveError]="saveError"
        (save)="saveEdit($event)"
        (cancelEdit)="cancelEdit()"
      ></app-user-profile-form>

      <p-card
        *ngIf="userInfo.interestRoles?.length && !(isOwnProfile && editMode)"
        styleClass="w-full max-w-6xl mx-auto text-white rounded-lg shadow-lg bg-gray-900 "
      >
        <h3 class="font-bold mb-2">Áreas de Interesse:</h3>
        <div class="flex flex-row flex-wrap gap-2">
          <p-tag
            *ngFor="let role of userInfo.interestRoles"
            [value]="role.name"
            severity="success"
          ></p-tag>
        </div>
      </p-card>
    </div>
  </div>
</div>
